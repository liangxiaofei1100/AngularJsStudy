// Generated by CoffeeScript 1.10.0
(function() {
  var browserSync, concat, del, gulp, minifyCss, runSequence, uglify;

  gulp = require('gulp');

  runSequence = require('run-sequence');

  del = require('del');

  uglify = require('gulp-uglify');

  concat = require('gulp-concat');

  minifyCss = require('gulp-minify-css');

  browserSync = require('browser-sync').create();

  gulp.task('default', function(callback) {
    return runSequence(['clean'], ['build'], ['serve', 'watch'], callback);
  });

  gulp.task('clean', function(callback) {
    return del(['./app/dist/'], callback);
  });

  gulp.task('build', function(callback) {
    return runSequence(['copy', 'miniJs', 'miniCss'], callback);
  });

  gulp.task('copy', function() {
    return gulp.src('./app/src/**/*.*').pipe(gulp.dest('./app/dist/'));
  });

  gulp.task('miniJs', function() {
    return gulp.src('./app/src/**/*.js').pipe(uglify()).pipe(gulp.dest('./app/dist/'));
  });

  gulp.task('miniCss', function() {
    return gulp.src('./app/src/**/*.css').pipe(minifyCss()).pipe(concat('app.css', {
      newLine: ';\n\n'
    })).pipe(gulp.dest('./app/dist/'));
  });

  gulp.task('concat', function() {
    return gulp.src('./app/src/**/*.js').pipe(concat('all.js', {
      newLine: ';\n'
    })).pipe(gulp.dest('./app/dist/'));
  });

  gulp.task('serve', function() {
    return browserSync.init({
      server: {
        baseDir: './app/dist/'
      },
      port: 7411
    });
  });

  gulp.task('watch', function() {
    return gulp.watch('./app/src/**/*.*', ['reload']);
  });

  gulp.task('reload', function(callback) {
    return runSequence(['copy', 'miniJs', 'miniCss'], ['reload-browser'], callback);
  });

  gulp.task('reload-browser', function() {
    return browserSync.reload();
  });

}).call(this);

//# sourceMappingURL=gulpfile.js.map
